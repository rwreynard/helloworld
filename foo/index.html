<!doctype html>
 
<html lang="en">
<head> <title>Example</title> 
   <script id="sap-ui-bootstrap" type="text/javascript" 
     src="/sap/ui5/1/resources/sap-ui-core.js" 
     data-sap-ui-language="en"
     data-sap-ui-theme="sap_goldreflection" 
     data-sap-ui-libs="sap.ui.core,sap.ui.commons,sap.ui.ux3,sap.ui.table"> 
   </script> 
   <script type="text/javascript" src="/sap/ui5/1/resources/jquery-sap.js"></script> 
   <script> function doSomething() { 
                $.ajax({ 
                    url: "logic.xsjs", 
                    type: "GET", 
                    beforeSend: function(xhr) { 
                        xhr.setRequestHeader("X-CSRF-Token", "Fetch"); 
                    }, 
                    success: function(data, textStatus, XMLHttpRequest) { 
                        var token = XMLHttpRequest.getResponseHeader('X-CSRF-Token'); 
                        var data = "somePayLoad"; 
                        $.ajax({ 
                            url: "logic.xsjs", 
                            type: "POST", 
                            data: data, 
                            beforeSend: function(xhr) { 
                                xhr.setRequestHeader("X-CSRF-Token", token); 
                            }, 
                            success: function() { 
                                alert("works"); 
                            }, error: function() { 
                                alert("works not"); 
                            } 
                        }); 
                    } 
                }); 
             } 
   </script>
</head>
<body> 
    <div> 
        <a href="#" onClick="doSomething();">Do something</a> 
    </div>
</body>
</html>
